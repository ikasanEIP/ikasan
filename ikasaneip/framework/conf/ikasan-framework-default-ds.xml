<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE datasources 
    PUBLIC "-//JBoss//DTD JBOSS JCA Config 1.5//EN"
    "http://www.jboss.org/j2ee/dtd/jboss-ds_1_5.dtd">
<!-- 
# //
# //
# // $Id: ikasan-framework-default-ds.xml 16808 2009-04-27 07:28:17Z mitcje $
# // $URL: svn+ssh://svc-vcsp/architecture/ikasan/trunk/framework/conf/ikasan-framework-default-ds.xml $
# // 
# // ====================================================================
# // Ikasan Enterprise Integration Platform
# // Copyright (c) 2003-2008 Mizuho International plc. and individual contributors as indicated
# // by the @authors tag. See the copyright.txt in the distribution for a
# // full listing of individual contributors.
# //
# // This is free software; you can redistribute it and/or modify it
# // under the terms of the GNU Lesser General Public License as
# // published by the Free Software Foundation; either version 2.1 of
# // the License, or (at your option) any later version.
# //
# // This software is distributed in the hope that it will be useful,
# // but WITHOUT ANY WARRANTY; without even the implied warranty of
# // MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
# // Lesser General Public License for more details.
# //
# // You should have received a copy of the GNU Lesser General Public
# // License along with this software; if not, write to the 
# // Free Software Foundation Europe e.V. Talstrasse 110, 40217 Dusseldorf, Germany 
# // or see the FSF site: http://www.fsfeurope.org/.
# // ====================================================================
# //
# // Author:  Ikasan Development Team
# // 
-->
<datasources>

  <!--
   *  No Transaction Datasource configuration
  -->
  <no-tx-datasource>
    <jndi-name>ikasan/framework/default/ds</jndi-name>
    <use-java-context>true</use-java-context>
    <connection-url>jdbc:sybase:Tds:@EAI_DATABASE_SVCNAME@:@EAI_DATABASE_PORT@/@EAI_DATABASE_NAME@</connection-url>
    <driver-class>com.sybase.jdbc3.jdbc.SybDataSource</driver-class>
    <!-- The security domain -->
    <!--security-domain>@EAI_DATASOURCE_NAME@EncryptionPolicy</security-domain-->
    <user-name>@EAI_DATABASE_USERNAME@</user-name>
    <password>@EAI_DATABASE_PASSWORD@</password>
    <check-valid-connection-sql>SELECT @@VERSION</check-valid-connection-sql>
    <exception-sorter-class-name>org.jboss.resource.adapter.jdbc.vendor.SybaseExceptionSorter</exception-sorter-class-name>
    <metadata>
      <type-mapping>Sybase</type-mapping>
    </metadata>
  </no-tx-datasource>

  <!-- 
   * No Transaction Datasource configuration 
  -->
  <local-tx-datasource>
    <jndi-name>ikasan/framework/defaultLocal/localds</jndi-name>
    <use-java-context>true</use-java-context>
    <connection-url>jdbc:sybase:Tds:@EAI_DATABASE_SVCNAME@:@EAI_DATABASE_PORT@/@EAI_DATABASE_NAME@</connection-url>
    <driver-class>com.sybase.jdbc3.jdbc.SybDataSource</driver-class>
    <!-- The security domain -->
    <!--security-domain>@EAI_LOCAL_DATASOURCE_NAME@EncryptionPolicy</security-domain-->
    <user-name>@EAI_DATABASE_USERNAME@</user-name>
    <password>@EAI_DATABASE_PASSWORD@</password>
    <check-valid-connection-sql>SELECT @@VERSION</check-valid-connection-sql>
    <exception-sorter-class-name>org.jboss.resource.adapter.jdbc.vendor.SybaseExceptionSorter</exception-sorter-class-name>
    <metadata>
      <type-mapping>Sybase</type-mapping>
    </metadata>
  </local-tx-datasource>

  <!-- 
   * Transactional Datasource 
   * Persistence of sequence numbers must be within scope of the transaction 
  -->
  <xa-datasource>
    <jndi-name>ikasan/framework/defaultXA/xads</jndi-name>
    <use-java-context>true</use-java-context>
    <track-connection-by-tx />
    <xa-datasource-class>com.sybase.jdbc3.jdbc.SybXADataSource</xa-datasource-class>
    <xa-datasource-property name="DatabaseName">@EAI_DATABASE_NAME@</xa-datasource-property>
    <xa-datasource-property name="ServerName">@EAI_DATABASE_SVCNAME@</xa-datasource-property>
    <xa-datasource-property name="PortNumber">@EAI_DATABASE_PORT@</xa-datasource-property>
    <user-name>@EAI_DATABASE_USERNAME@</user-name>
    <password>@EAI_DATABASE_PASSWORD@</password>
    <!-- The security domain -->
    <!--security-domain>@EAI_XA_DATASOURCE_NAME@EncryptionPolicy</security-domain-->
    <check-valid-connection-sql>SELECT @@VERSION</check-valid-connection-sql>
    <exception-sorter-class-name>org.jboss.resource.adapter.jdbc.vendor.SybaseExceptionSorter</exception-sorter-class-name>
    <metadata>
      <type-mapping>Sybase</type-mapping>
    </metadata>
  </xa-datasource>

</datasources>