<?xml version="1.0"?>
<!-- 
 * $Id: Policy.hbm.xml 43977 2015-03-10 16:06:07Z stewmi $
 * $URL: https://svc-vcs-prd.uk.mizuho-sc.com:18080/svn/architecture/cmi2/trunk/projects/securityModelService/api/src/main/resources/com/mizuho/cmi2/security/model/Policy.hbm.xml $
 *
 * ====================================================================
 *
 * Copyright (c) 2000-2010 by Mizuho International plc.
 * All Rights Reserved.
 *
 * ====================================================================
 *
-->
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class
        name="org.ikasan.topology.model.Server"
        table="Server">

        <id name="id"
          type="java.lang.Long"
          column="Id"
          unsaved-value="null">
          <generator class="identity" />
        </id>

        <property name="name"
                  type="java.lang.String"
                  column="Name"
                  not-null="true"
                  unique="true"/>

        <property name="description"
                  type="java.lang.String"
                  column="Description"
                  not-null="true" 
                  unique="false"/>
                  
        <property name="url"
                  type="java.lang.String"
                  column="Url"
                  not-null="true" 
                  unique="false"/>
        
        <property name="port"
                  type="java.lang.Integer"
                  column="Port"
                  not-null="true" 
                  unique="false"/>
         
        <set name="modules" cascade="all" lazy="false" order-by="Id asc">
         	<key column="ServerId"/>
         	<one-to-many class="org.ikasan.topology.model.Module"/>
      	</set>
       	
        <property name="createdDateTime"
                  type="java.util.Date"
                  column="CreatedDateTime"
                  not-null="true" />

        <property name="updatedDateTime"
                  type="java.util.Date"
                  column="UpdatedDateTime"
                  not-null="true" />
    </class>
</hibernate-mapping>