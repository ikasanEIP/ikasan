<?xml version="1.0"?>
<!-- 
 * $Id: Policy.hbm.xml 43977 2015-03-10 16:06:07Z stewmi $
 * $URL: https://svc-vcs-prd.uk.mizuho-sc.com:18080/svn/architecture/cmi2/trunk/projects/securityModelService/api/src/main/resources/com/mizuho/cmi2/security/model/Policy.hbm.xml $
 *
 * ====================================================================
 *
 * Copyright (c) 2000-2010 by Mizuho International plc.
 * All Rights Reserved.
 *
 * ====================================================================
 *
-->
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class
        name="org.ikasan.topology.model.Flow"
        table="Flow">

        <id name="id"
          type="java.lang.Long"
          column="Id"
          unsaved-value="null">
          <generator class="identity" />
        </id>

        <property name="name"
                  type="java.lang.String"
                  column="Name"
                  not-null="true"
                  unique="false"/>

        <property name="description"
                  type="java.lang.String"
                  column="Description"
                  not-null="true" 
                  unique="false"/>
        
        <many-to-one name="module" column="moduleId" 
       		class="org.ikasan.topology.model.Module" not-null="true"/>
       	
       	<set name="components" cascade="all">
         	<key column="FlowId"/>
         	<one-to-many class="org.ikasan.topology.model.Component"/>
      	</set>

        <property name="createdDateTime"
                  type="java.util.Date"
                  column="CreatedDateTime"
                  not-null="true" />

        <property name="updatedDateTime"
                  type="java.util.Date"
                  column="UpdatedDateTime"
                  not-null="true" />
    </class>
</hibernate-mapping>