<?xml version="1.0"?>
<!-- 
 * $Id: Principal.hbm.xml 43977 2015-03-10 16:06:07Z stewmi $
 * $URL: https://svc-vcs-prd.uk.mizuho-sc.com:18080/svn/architecture/cmi2/trunk/projects/securityModelService/api/src/main/resources/com/mizuho/cmi2/security/model/Principal.hbm.xml $
 *
 * ====================================================================
 *
 * Copyright (c) 2000-2010 by Mizuho International plc.
 * All Rights Reserved.
 *
 * ====================================================================
 *
-->
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class
        name="org.ikasan.security.model.IkasanPrincipal"
        table="SecurityPrincipal">

        <id name="id"
          type="java.lang.Long"
          column="Id"
          unsaved-value="null">
          <generator class="identity" />
        </id>

        <set name="roles" table="PrincipalRole" lazy="false">
	        <key column="PrincipalId"/>
	        <many-to-many column="RoleId"
	            class="org.ikasan.security.model.Role"/>
	    </set>

        <property name="name"
                  type="java.lang.String"
                  column="Name"
                  not-null="true"
                  unique="true"/>

        <property name="type"
                  type="java.lang.String"
                  column="PrincipalType"
                  not-null="true"/>

        <property name="timestamp"
                  type="java.util.Date"
                  column="CreatedDateTime"
                  not-null="true" />

        <property name="updatedDateTime"
                  type="java.util.Date"
                  column="UpdatedDateTime"
                  not-null="true" />
    </class>
</hibernate-mapping>