<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping SYSTEM
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"
>

<!-- 
# // 
# // ====================================================================
# // Ikasan Enterprise Integration Platform
# // Copyright (c) 2003-2008 Mizuho International plc. and individual contributors as indicated
# // by the @authors tag. See the copyright.txt in the distribution for a
# // full listing of individual contributors.
# //
# // This is free software; you can redistribute it and/or modify it
# // under the terms of the GNU Lesser General Public License as
# // published by the Free Software Foundation; either version 2.1 of
# // the License, or (at your option) any later version.
# //
# // This software is distributed in the hope that it will be useful,
# // but WITHOUT ANY WARRANTY; without even the implied warranty of
# // MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
# // Lesser General Public License for more details.
# //
# // You should have received a copy of the GNU Lesser General Public
# // License along with this software; if not, write to the 
# // Free Software Foundation Europe e.V. Talstrasse 110, 40217 Dusseldorf, Germany 
# // or see the FSF site: http://www.fsfeurope.org/.
# // ====================================================================
# //
# // Author:  Ikasan Development Team
# // 
-->
<hibernate-mapping  default-access="field">

<class name="org.ikasan.framework.event.exclusion.model.ExcludedEvent" table="ExcludedEvent" >

    <!-- Common id property -->
	<id name="id" type="long" column="Id">
		<generator class="identity"/>
	</id>
	
	<!-- Excluded Event fields -->
	<property name="moduleName" >
		<column name="ModuleName" length="255" not-null="true"/>
	</property>
	
	<property name="flowName">
		<column name="FlowName" length="255" not-null="true"/>
	</property>
	
	<property name="exclusionTime" column="ExclusionTime" not-null="true"/>


    

	<!-- The Event itself -->
	<component name="event" >
	
		<property name="id" >
			<column name="EventId" length="255" not-null="true"/>
		</property>
		<!-- <property name="componentGroupName" column="ComponentGroupName"  />
		<property name="componentName" column="ComponentName"  />-->
		<property name="priority" column="Priority"  />
		<property name="timestamp" column="Timestamp"  />


		<!-- Use a standard parent/child relationship for payloads, this a persistent list -->
		<list name="payloads" cascade="all" lazy="false">
		
			<key not-null="true"> <!-- NOT NULL has to be here! -->
	            <column name="ExcludedEventId"/>
	        </key>
	        <list-index column="PayloadPosition"/>
			<one-to-many class="org.ikasan.common.component.DefaultPayload"/>			
			
		</list>
	</component>
	

</class>

</hibernate-mapping>