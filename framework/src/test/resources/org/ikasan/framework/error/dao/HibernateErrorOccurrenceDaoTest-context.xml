<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">


	<bean id="hibernateErrorOccurrenceDao"
		class="org.ikasan.framework.error.dao.HibernateErrorOccurrenceDao">
		<property name="sessionFactory" ref="sessionFactory" />
	</bean>

	<bean id="sessionFactory"
		class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
		<property name="dataSource" ref="dataSource" />
		<property name="mappingResources">
			<list>
				<value>ErrorOccurrence.hbm.xml</value>
			</list>
		</property>

		<property name="hibernateProperties">
			<props>
				<prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect
				</prop>
				<!-- <prop key="hibernate.show_sql">true</prop>-->
			</props>
		</property>
	</bean>


	<bean class="org.springframework.jdbc.datasource.DriverManagerDataSource"
		id="dataSource">
		<property name="driverClassName">
			<value>org.hsqldb.jdbcDriver</value>
		</property>
		<property name="url">
			<value>jdbc:hsqldb:mem:testdb</value>
		</property>
		<property name="username">
			<value>sa</value>
		</property>
		<property name="password">
			<value></value>
		</property>
	</bean>
	

	<bean id="tableCreationQuery" class="java.lang.String">
			<constructor-arg>
			<value>
				CREATE TABLE ErrorOccurrence(    Id                  INTEGER IDENTITY NOT NULL,
			    ModuleName          VARCHAR(128)  NOT NULL,
			    FlowName            VARCHAR(128),
			    InitiatorName       VARCHAR(128),
			    FlowElementName     VARCHAR(128),
			    EventId             VARCHAR(128),
			    CurrentEvent     LONGVARCHAR,
			    ErrorDetail      LONGVARCHAR NOT NULL,
			    LogTime     DATETIME      NOT NULL,
			    Expiry     DATETIME     
			    )
    		</value>
    	</constructor-arg>
    </bean>
	
	
	
</beans>